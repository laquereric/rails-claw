<% content_for(:title) { "Agents - #{@workspace.name}" } %>

<div class="space-y-6">
  <%= render PageHeaderComponent.new(title: "Agents", subtitle: "Workspace: #{@workspace.name}") do |header| %>
    <% header.with_actions do %>
      <%= render ButtonComponent.new(label: "New Agent", path: new_workspace_agent_path(@workspace)) %>
      <%= render ButtonComponent.new(label: "Back", path: workspace_path(@workspace), variant: :secondary) %>
    <% end %>
  <% end %>

  <% if @agents.any? %>
    <div class="bg-white shadow rounded-lg divide-y divide-gray-200">
      <% @agents.each do |agent| %>
        <div class="p-4 flex justify-between items-center">
          <div>
            <%= link_to agent.name, workspace_agent_path(@workspace, agent), class: "text-sm font-medium text-indigo-600 hover:text-indigo-500" %>
            <%= render StatusBadgeComponent.new(status: agent.status) %>
            <p class="text-xs text-gray-500 mt-1"><%= agent.conversations.count %> conversations</p>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <%= render EmptyStateComponent.new(message: "No agents yet.") %>
  <% end %>
</div>
